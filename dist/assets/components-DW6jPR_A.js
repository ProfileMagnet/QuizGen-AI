const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/sections-D72W4XIr.js","assets/react-vendor-DyhvjDzy.js","assets/vendor-C21JJjeX.js","assets/sections-zwz6kXNB.css","assets/quiz-generator-BqGMs_gc.js","assets/quiz-generator-CK368sPO.css","assets/animated-bg-Chequfzv.js","assets/pdf-vendor-C6MOYFsO.js"])))=>i.map(i=>d[i]);
var Z=Object.defineProperty,q=Object.defineProperties;var ee=Object.getOwnPropertyDescriptors;var K=Object.getOwnPropertySymbols;var se=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable;var H=(l,m,a)=>m in l?Z(l,m,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[m]=a,T=(l,m)=>{for(var a in m||(m={}))se.call(m,a)&&H(l,a,m[a]);if(K)for(var a of K(m))te.call(m,a)&&H(l,a,m[a]);return l},Q=(l,m)=>q(l,ee(m));var P=(l,m,a)=>new Promise((v,n)=>{var r=p=>{try{i(a.next(p))}catch(j){n(j)}},u=p=>{try{i(a.throw(p))}catch(j){n(j)}},i=p=>p.done?v(p.value):Promise.resolve(p.value).then(r,u);i((a=a.apply(l,m)).next())});import{j as e,r as C,R as G,C as re,T as ne,A as ce,a as ae,B as ie,b as X,c as V,d as W,G as Y,e as M,D as O,E as le}from"./react-vendor-DyhvjDzy.js";import"./quiz-generator-BqGMs_gc.js";const oe="modulepreload",de=function(l){return"/"+l},J={},_=function(m,a,v){let n=Promise.resolve();if(a&&a.length>0){let u=function(j){return Promise.all(j.map(o=>Promise.resolve(o).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),p=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));n=u(a.map(j=>{if(j=de(j),j in J)return;J[j]=!0;const o=j.endsWith(".css"),b=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${j}"]${b}`))return;const S=document.createElement("link");if(S.rel=o?"stylesheet":oe,o||(S.as="script"),S.crossOrigin="",S.href=j,p&&S.setAttribute("nonce",p),document.head.appendChild(S),o)return new Promise((E,g)=>{S.addEventListener("load",E),S.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${j}`)))})}))}function r(u){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=u,window.dispatchEvent(i),!i.defaultPrevented)throw u}return n.then(u=>{for(const i of u||[])i.status==="rejected"&&r(i.reason);return m().catch(r)})},he=()=>e.jsx("div",{className:"loading-container"}),R=(l,m)=>{const a=v=>e.jsx(C.Suspense,{fallback:e.jsx(he,{message:m}),children:e.jsx(l,T({},v))});return a.displayName=`LazyLoaded(${l.displayName||l.name})`,a},Ne=l=>l(),me=(l=.1)=>{const[m,a]=G.useState(!1),v=G.useRef(null);return G.useEffect(()=>{const n=new IntersectionObserver(([r])=>{r.isIntersecting&&(a(!0),n.disconnect())},{threshold:l,rootMargin:"50px"});return v.current&&n.observe(v.current),()=>n.disconnect()},[l]),{ref:v,isVisible:m}},be=R(C.lazy(()=>_(()=>import("./sections-D72W4XIr.js").then(l=>l.A),__vite__mapDeps([0,1,2,3])))),we=R(C.lazy(()=>_(()=>import("./sections-D72W4XIr.js").then(l=>l.T),__vite__mapDeps([0,1,2,3])))),ye=R(C.lazy(()=>_(()=>import("./sections-D72W4XIr.js").then(l=>l.E),__vite__mapDeps([0,1,2,3])))),Ce=R(C.lazy(()=>_(()=>import("./sections-D72W4XIr.js").then(l=>l.U),__vite__mapDeps([0,1,2,3])))),Ae=R(C.lazy(()=>_(()=>import("./sections-D72W4XIr.js").then(l=>l.a),__vite__mapDeps([0,1,2,3])))),ke=R(C.lazy(()=>_(()=>import("./sections-D72W4XIr.js").then(l=>l.C),__vite__mapDeps([0,1,2,3])))),Se=R(C.lazy(()=>_(()=>import("./sections-D72W4XIr.js").then(l=>l.F),__vite__mapDeps([0,1,2,3])))),Le=R(C.lazy(()=>_(()=>import("./quiz-generator-BqGMs_gc.js"),__vite__mapDeps([4,1,2,5])))),ze=R(C.lazy(()=>_(()=>import("./sections-D72W4XIr.js").then(l=>l.D),__vite__mapDeps([0,1,2,3])))),Ee=R(C.lazy(()=>_(()=>import("./animated-bg-Chequfzv.js"),__vite__mapDeps([6,1,2])))),$e=({children:l,id:m,className:a,threshold:v=.1,fallback:n=null})=>{const{ref:r,isVisible:u}=me(v);return e.jsx("section",{ref:r,id:m,className:a,children:u?l:n})},De=({onComplete:l,duration:m=100})=>{const[a,v]=C.useState([]),[n,r]=C.useState(!0),u=C.useMemo(()=>["#8B5CF6","#3B82F6","#10B981","#F59E0B","#EF4444","#EC4899","#06B6D4","#84CC16"],[]),i=C.useMemo(()=>["square","circle","triangle"],[]);return C.useEffect(()=>{const p=[];for(let o=0;o<50;o++)p.push({id:o,left:50+(Math.random()-.5)*60,delay:Math.random()*.2,rotation:Math.random()*360,color:u[Math.floor(Math.random()*u.length)],size:Math.random()*8+4,duration:Math.random()*1+2,type:i[Math.floor(Math.random()*i.length)]});v(p);const j=setTimeout(()=>{r(!1),l&&l()},m);return()=>clearTimeout(j)},[m,l,u,i]),n?e.jsxs("div",{className:"confetti-container",children:[e.jsxs("div",{className:"success-message",children:[e.jsx("div",{className:"success-icon",children:e.jsx("svg",{viewBox:"0 0 24 24",className:"checkmark",children:e.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z",fill:"currentColor"})})}),e.jsx("h2",{className:"success-text",children:"Quiz Generated!"}),e.jsx("p",{className:"success-subtext",children:"Ready to start"})]}),a.map(p=>e.jsx("div",{className:`confetti-piece confetti-${p.type}`,style:{left:`${p.left}%`,backgroundColor:p.color,width:`${p.size}px`,height:`${p.size}px`,animationDelay:`${p.delay}s`,animationDuration:`${p.duration}s`,"--rotation":`${p.rotation}deg`}},p.id))]}):null},Fe=({message:l="Generating your quiz...",onTimeout:m})=>{const[a,v]=C.useState(l);return C.useEffect(()=>{const n=setTimeout(()=>{v("It's taking longer than expected, please wait..."),m&&m()},6e4);return()=>{clearTimeout(n)}},[m]),e.jsx("div",{className:"loading-animation-container",children:e.jsxs("div",{className:"loading-content",children:[e.jsxs("div",{className:"brain-container",children:[e.jsxs("div",{className:"brain-icon",children:[e.jsx("div",{className:"brain-left"}),e.jsx("div",{className:"brain-right"}),e.jsx("div",{className:"synapse synapse-1"}),e.jsx("div",{className:"synapse synapse-2"}),e.jsx("div",{className:"synapse synapse-3"}),e.jsx("div",{className:"synapse synapse-4"})]}),e.jsx("div",{className:"glow-effect"})]}),e.jsx("div",{className:"particles",children:[...Array(12)].map((n,r)=>e.jsx("div",{className:`particle particle-${r+1}`},r))}),e.jsxs("div",{className:"loading-text",children:[e.jsx("h3",{children:a}),e.jsxs("div",{className:"dots-container",children:[e.jsx("span",{className:"dot",children:"."}),e.jsx("span",{className:"dot",children:"."}),e.jsx("span",{className:"dot",children:"."})]})]}),e.jsx("div",{className:"progress-bar-container",children:e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill"})})}),e.jsxs("div",{className:"fun-fact",children:[e.jsx("p",{className:"fact-label",children:"Did you know?"}),e.jsx("p",{className:"fact-text",id:"rotating-fact",children:"AI is analyzing patterns to create perfect questions..."})]})]})})},_e=({isOpen:l,title:m,message:a,onRetry:v,onCancel:n,retryText:r="Retry",cancelText:u="Ok",showRetry:i=!0,showCancel:p=!0,type:j="info"})=>l?e.jsx("div",{className:"common-dialog-overlay",children:e.jsxs("div",{className:`common-dialog dialog-${j}`,children:[e.jsx("div",{className:"dialog-header",children:e.jsx("h3",{children:m})}),e.jsx("div",{className:"dialog-body",children:e.jsx("p",{children:a})}),e.jsxs("div",{className:"dialog-footer",children:[p&&e.jsx("button",{className:`dialog-button cancel-button ${j==="error"?"error":""}`,onClick:n,children:u}),i&&e.jsx("button",{className:`dialog-button retry-button ${j==="error"?"error":""}`,onClick:v,children:r})]})]})}):null,I=({questions:l,userAnswers:m,fibUserAnswers:a={},orderingUserOrders:v={},matchingUserMatches:n={},isVisible:r})=>{const u=()=>{const o=l.length;let b=0,S=0;l.forEach(w=>{let L=!1,k=!1;if(w.type==="fib"){const f=a[w.id];if(f&&f.trim()!==""){L=!0;const N=f.trim().toLowerCase();k=(w.answersList||[]).some(z=>z.toLowerCase()===N)}}else if(w.type==="ordering"){const f=v[w.id];if(Array.isArray(f)&&f.length>0){L=!0;const N=w.orderingAnswerIndexList||[];k=f.length===N.length&&f.every((A,z)=>A===N[z])}}else if(w.type==="matching"){const f=n[w.id];if(Array.isArray(f)&&f.length>0){const N=w.matchingLeft?w.matchingLeft.length:0;if(f.length===N&&f.every(A=>typeof A=="number")){L=!0;const A=w.matchingAnswerIndexList||[];k=f.every((z,x)=>z===A[x])}}}else m[w.id]!==void 0&&(L=!0,k=m[w.id]===w.correctAnswer);L&&(b++,k&&S++)});const E=b>0?Math.round(S/b*100):0,g=o>0?Math.round(b/o*100):0;return{totalQuestions:o,answeredQuestions:b,correctAnswers:S,accuracy:E,progress:g,remaining:o-b}},i=o=>o>=90?{level:"Excellent",color:"#22c55e",icon:"ðŸ†"}:o>=75?{level:"Good",color:"#3b82f6",icon:"ðŸ‘"}:o>=60?{level:"Average",color:"#f59e0b",icon:"ðŸ“ˆ"}:{level:"Needs Work",color:"#ef4444",icon:"ðŸ’ª"},p=u(),j=i(p.accuracy);return r?e.jsxs("div",{className:"insights-dashboard",children:[e.jsx("div",{className:"dashboard-header",children:e.jsxs("div",{className:"dashboard-title",children:[e.jsx(re,{size:20}),e.jsx("span",{children:"Real-time Insights"})]})}),e.jsxs("div",{className:"dashboard-content",children:[e.jsxs("div",{className:"insight-card progress-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(ne,{size:16}),e.jsx("span",{children:"Progress"})]}),e.jsxs("div",{className:"progress-stats",children:[e.jsx("div",{className:"progress-circle",children:e.jsxs("svg",{viewBox:"0 0 36 36",className:"circular-chart",children:[e.jsx("path",{className:"circle-bg",d:`M18 2.0845\r
                    a 15.9155 15.9155 0 0 1 0 31.831\r
                    a 15.9155 15.9155 0 0 1 0 -31.831`}),e.jsx("path",{className:"circle",strokeDasharray:`${p.progress}, 100`,d:`M18 2.0845\r
                    a 15.9155 15.9155 0 0 1 0 31.831\r
                    a 15.9155 15.9155 0 0 1 0 -31.831`}),e.jsxs("text",{x:"18",y:"20.35",className:"percentage",children:[p.progress,"%"]})]})}),e.jsxs("div",{className:"progress-details",children:[e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-value",children:p.answeredQuestions}),e.jsx("span",{className:"stat-label",children:"Answered"})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-value",children:p.remaining}),e.jsx("span",{className:"stat-label",children:"Remaining"})]})]})]})]}),e.jsxs("div",{className:"insight-card performance-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(ce,{size:16}),e.jsx("span",{children:"Performance"})]}),e.jsxs("div",{className:"performance-content",children:[e.jsxs("div",{className:"performance-level",style:{color:j.color},children:[e.jsx("span",{className:"performance-icon",children:j.icon}),e.jsx("span",{className:"performance-text",children:j.level})]}),e.jsxs("div",{className:"accuracy-display",children:[e.jsxs("span",{className:"accuracy-value",children:[p.accuracy,"%"]}),e.jsx("span",{className:"accuracy-label",children:"Accuracy"})]})]})]}),e.jsxs("div",{className:"insight-card stats-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(ae,{size:16}),e.jsx("span",{children:"Quick Stats"})]}),e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-box correct",children:[e.jsx("div",{className:"stat-number",children:p.correctAnswers}),e.jsx("div",{className:"stat-text",children:"Correct"})]}),e.jsxs("div",{className:"stat-box incorrect",children:[e.jsx("div",{className:"stat-number",children:p.answeredQuestions-p.correctAnswers}),e.jsx("div",{className:"stat-text",children:"Incorrect"})]}),e.jsxs("div",{className:"stat-box total",children:[e.jsx("div",{className:"stat-number",children:p.totalQuestions}),e.jsx("div",{className:"stat-text",children:"Total"})]})]})]}),p.answeredQuestions>0&&e.jsxs("div",{className:"insight-card tips-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(ie,{size:16}),e.jsx("span",{children:"Study Tips"})]}),e.jsxs("div",{className:"tips-content",children:[p.accuracy>=90&&e.jsxs("div",{className:"tip",children:[e.jsx("span",{className:"tip-icon",children:"ðŸŒŸ"}),e.jsx("span",{children:"Excellent work! You're mastering this topic."})]}),p.accuracy>=75&&p.accuracy<90&&e.jsxs("div",{className:"tip",children:[e.jsx("span",{className:"tip-icon",children:"ðŸ“š"}),e.jsx("span",{children:"Good progress! Review incorrect answers to improve."})]}),p.accuracy>=60&&p.accuracy<75&&e.jsxs("div",{className:"tip",children:[e.jsx("span",{className:"tip-icon",children:"ðŸŽ¯"}),e.jsx("span",{children:"Focus on understanding key concepts better."})]}),p.accuracy<60&&p.answeredQuestions>=3&&e.jsxs("div",{className:"tip",children:[e.jsx("span",{className:"tip-icon",children:"ðŸ’¡"}),e.jsx("span",{children:"Consider reviewing the material before continuing."})]}),p.remaining>0&&e.jsxs("div",{className:"tip",children:[e.jsx("span",{className:"tip-icon",children:"â°"}),e.jsxs("span",{children:[p.remaining," questions left to complete!"]})]})]})]})]})]}):null},ue=({question:l,quizMode:m,currentMatches:a,setMatches:v,questionNumber:n=1,totalQuestions:r=1,score:u=0})=>{const[i,p]=C.useState(null),[j,o]=C.useState(null),b=C.useRef(null),S=l.matchingLeft||[],E=l.matchingRight||[],g=l.matchingAnswerIndexList||[],w=(t,h)=>{if(m!=="practice")return;p(h),b.current={x:t.clientX,y:t.clientY},t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text/plain",h.toString());const $=t.currentTarget,D=$.getBoundingClientRect();t.dataTransfer.setDragImage($,D.width/2,D.height/2)},L=()=>{p(null),o(null),b.current=null},k=(t,h)=>{m==="practice"&&(t.preventDefault(),t.dataTransfer.dropEffect="move",o(h))},f=()=>{o(null)},N=(t,h)=>{if(m!=="practice")return;t.preventDefault();const $=parseInt(t.dataTransfer.getData("text/plain"));if($!==null&&!isNaN($)){const D=[...a];for(let F=0;F<D.length;F++)D[F]===$&&(D[F]=void 0);D[h]=$,v(D)}o(null),p(null)},A=t=>{if(m!=="practice")return;const h=[...a];h[t]=void 0,v(h)},z=()=>a.length===S.length&&a.every(t=>typeof t=="number"),x=()=>z()&&a.every((t,h)=>t===g[h]),c=t=>m==="review"&&a[t]!==void 0?a[t]===g[t]?"correct":"incorrect":"none",s=t=>a.includes(t),d=()=>{const t=a.filter(h=>h!==void 0).length;return Math.round(t/S.length*100)},y=()=>{const t=d();return t===100?"ðŸŽ‰ Perfect!":t>=80?"ðŸ”¥ Keep going!":t>=50?"ðŸ‘ Good progress!":t>0?"ðŸ’ª Keep it up!":"ðŸš€ Start matching!"};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"matching-header",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"matching-title",children:"Match the Following"}),e.jsx("p",{className:"matching-subtitle",children:"Drag items from the right to match with items on the left."})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"question-progress",children:["Question ",n," of ",r]}),e.jsxs("div",{className:"timer-score-display",children:["Score: ",u,"%"]})]})]}),e.jsxs("div",{className:"matching-stats",children:[e.jsxs("div",{className:"progress-container",children:[e.jsxs("div",{className:"progress-label",children:[e.jsx("span",{className:"progress-text",children:"Progress"}),e.jsxs("span",{className:"progress-text",children:[d(),"%"]})]}),e.jsx("div",{className:"progress-bar-container",children:e.jsx("div",{className:"progress-bar",style:{width:`${d()}%`}})})]}),e.jsxs("div",{className:"accuracy-display",children:["Accuracy: ",d(),"%"]}),e.jsx("div",{className:"encouragement-message",children:y()})]}),e.jsx("div",{className:"question-options",children:e.jsxs("div",{className:"matching-container",children:[e.jsxs("div",{className:"matching-column matching-left-column",children:[e.jsx("div",{className:"column-header",children:"Questions"}),S.map((t,h)=>{const $=a[h],D=c(h),F=j===h;return e.jsxs("div",{className:`matching-left-item ${F?"drag-over":""} ${D}`,onDragOver:U=>k(U,h),onDragLeave:f,onDrop:U=>N(U,h),children:[e.jsxs("div",{className:"matching-left-content",children:[e.jsxs("span",{className:"matching-index",children:[h+1,"."]}),e.jsx("span",{className:"matching-text",children:t})]}),e.jsx("div",{className:"matching-connection",children:$!==void 0?e.jsxs("div",{className:"matched-item",children:[e.jsx("span",{className:"matched-text",children:E[$]}),e.jsx(X,{size:16,className:"arrow-icon"}),m==="practice"&&e.jsx("button",{className:"remove-match-btn",onClick:()=>A(h),title:"Remove match",children:"Ã—"}),m==="review"&&e.jsx("div",{className:"match-status-icon",children:D==="correct"?e.jsx(V,{size:16,className:"correct-icon"}):e.jsx(W,{size:16,className:"incorrect-icon"})})]}):e.jsx("div",{className:"drop-zone",children:e.jsx("span",{className:"drop-text",children:"Drop your answer here"})})})]},h)})]}),e.jsxs("div",{className:"matching-right-column",children:[e.jsx("div",{className:"column-header",children:"Drag Answers"}),e.jsx("div",{className:`right-column-content ${E.filter((t,h)=>!s(h)).length===0?"all-matched":""}`,children:E.map((t,h)=>{const $=s(h),D=i===h;return $?null:e.jsxs("div",{className:`matching-right-item ${D?"dragging":""}`,draggable:m==="practice",onDragStart:F=>w(F,h),onDragEnd:L,children:[e.jsx(Y,{size:16,className:"drag-handle"}),e.jsx("span",{className:"right-item-text",children:t})]},h)})})]})]})}),e.jsxs("div",{className:"matching-actions",children:[e.jsx("button",{className:"action-btn submit-btn",disabled:!z()||m!=="practice",onClick:()=>{},children:"Submit"}),e.jsx("button",{className:"action-btn reset-btn",onClick:()=>v(Array(S.length).fill(void 0)),disabled:m!=="practice",children:"Reset"}),e.jsx("button",{className:"action-btn next-btn",disabled:!z(),children:"Next"})]}),m==="practice"&&z()&&e.jsx("div",{className:"instant-feedback",children:x()?e.jsxs("div",{className:"feedback correct-feedback",children:[e.jsx(V,{className:"feedback-icon",size:20}),"Perfect! All matches are correct."]}):e.jsx("div",{className:"feedback incorrect-feedback",children:e.jsxs("div",{className:"feedback-content",children:[e.jsx(W,{className:"feedback-icon",size:20}),e.jsx("span",{children:"Some matches are incorrect. Try again!"})]})})}),m==="review"&&e.jsxs("div",{className:"correct-answers-display",children:[e.jsx("h4",{children:"Correct Matches:"}),e.jsx("div",{className:"correct-matches-list",children:S.map((t,h)=>e.jsxs("div",{className:"correct-match-item",children:[e.jsx("span",{className:"correct-left",children:t}),e.jsx(X,{size:16,className:"correct-arrow"}),e.jsx("span",{className:"correct-right",children:E[g[h]]})]},h))})]})]})},B=l=>P(null,null,function*(){const{default:m}=yield _(()=>P(null,null,function*(){const{default:g}=yield import("./pdf-vendor-C6MOYFsO.js");return{default:g}}),__vite__mapDeps([7,2,1,4,5])),a=new m,v=a.internal.pageSize.getWidth(),n=a.internal.pageSize.getHeight();let r=15;const u=15,i=v-u*2,p=5,j=4,o=(g,w,L,k,f=12)=>{a.setFontSize(f);const N=a.splitTextToSize(g,k);return a.text(N,w,L),L+N.length*p+2},b=g=>r+g>n-u?(a.addPage(),r=15,!0):!1;l.forEach(g=>{var k,f,N,A,z;let w=30;g.type==="mcq"||g.type==="tf"?w+=g.options.length*10:g.type==="fib"?w+=14:g.type==="ordering"?w+=(((k=g.orderingContents)==null?void 0:k.length)||0)*10:g.type==="matching"&&(w+=Math.max(((f=g.matchingLeft)==null?void 0:f.length)||0,((N=g.matchingRight)==null?void 0:N.length)||0)*10),b(w),a.setFontSize(11),a.setFont("helvetica","bold");const L=`${g.id}. ${g.question}`;if(r=o(L,u,r,i,11),r+=2,a.setFontSize(9),a.setFont("helvetica","normal"),!g.type||g.type==="mcq"||g.type==="tf")g.options.forEach((x,c)=>{const d=`${String.fromCharCode(65+c)}) ${x}`;r=o(d,u+8,r,i-8,9)});else if(g.type==="fib"){const x=r+4;a.line(u,x,u+i/2,x),r+=12}else if(g.type==="ordering")(g.orderingContents||[]).forEach((c,s)=>{r=o(`${s+1}) ${c}`,u+8,r,i-8,9)});else if(g.type==="matching"){const x=g.matchingLeft||[],c=g.matchingRight||[],s=Math.max(x.length,c.length);for(let d=0;d<s;d++){const y=(A=x[d])!=null?A:"",t=(z=c[d])!=null?z:"",h=`${String.fromCharCode(65+d)}) ${y}     âŸ·     ${d+1}) ${t}`;r=o(h,u+8,r,i-8,9)}}r+=j}),a.addPage(),r=15,a.setFontSize(16),a.setFont("helvetica","bold"),r=o("Answer Key",u,r,i,16),r+=10,a.setFontSize(11),a.setFont("helvetica","normal"),l.forEach(g=>{if(b(30),!g.type||g.type==="mcq"||g.type==="tf"){const w=String.fromCharCode(65+g.correctAnswer),L=`${g.id}. ${w}`;r=o(L,u,r,i,11)}else if(g.type==="fib"){const w=g.answersList||[],L=`${g.id}. Acceptable answers:`;if(r=o(L,u,r,i,11),b(w.length*10),w.length>0){let k="";w.forEach((N,A)=>{const z=`${A+1}) ${N}`;k.length+z.length>80&&k.length>0?(r=o(k,u+10,r,i-10,11),k=z):k.length===0?k=z:k+=`  ${z}`}),k.length>0&&(r=o(k,u+10,r,i-10,11))}}else if(g.type==="ordering"){const w=g.orderingContents||[],L=g.orderingAnswerIndexList||[],k=`${g.id}. Correct order:`;r=o(k,u,r,i,11),b(L.length*15),L.forEach((f,N)=>{const A=`${N+1}. ${w[f]}`;r=o(A,u+10,r,i-10,11)})}else if(g.type==="matching"){const w=g.matchingLeft||[],L=g.matchingRight||[],k=g.matchingAnswerIndexList||[],f=`${g.id}. Correct matches:`;r=o(f,u,r,i,11),b(w.length*15),w.forEach((N,A)=>{const z=typeof k[A]=="number"?L[k[A]]:"",x=`${String.fromCharCode(65+A)}) ${N} â†’ ${A+1}) ${z}`;a.getStringUnitWidth(x)*11/a.internal.scaleFactor>i-20?(r=o(`${String.fromCharCode(65+A)}) ${N}`,u+10,r,i-10,11),r=o(`   â†’ ${A+1}) ${z}`,u+20,r,i-20,11)):r=o(x,u+10,r,i-10,11)})}r+=2});const S=n-10;a.setFontSize(8),a.setFont("helvetica","italic"),a.text("QuizGen AI",u,S),a.text(new Date().toLocaleDateString(),v-u-30,S);const E=`quiz-${new Date().toISOString().split("T")[0]}.pdf`;a.save(E)}),Re=({generatedQuiz:l,onReset:m,onGenerateMore:a,isGenerating:v})=>{const n=l.filter(c=>c.type==="matching"),[r,u]=C.useState({}),[i,p]=C.useState("practice"),[j,o]=C.useState(0),[b]=C.useState(5),S=C.useRef(n.length);C.useEffect(()=>{if(n.length>S.current&&S.current>0){const c=Math.floor(S.current/b);c<E()&&o(c)}S.current=n.length},[n.length,b]);const E=()=>Math.ceil(n.length/b);C.useEffect(()=>{const c={};n.forEach(s=>{if(s.type==="matching"){const d=(s.matchingLeft||[]).length;c[s.id]=Array(d).fill(void 0)}}),u(c)},[n]);const g=()=>{if(i==="review")return;if(window.confirm("Are you sure you want to reset all your answers? This action cannot be undone.")){const s={};l.forEach(d=>{if(d.type==="matching"){const y=(d.matchingLeft||[]).length;s[d.id]=Array(y).fill(void 0)}}),u(s),o(0)}},w=()=>P(null,null,function*(){if(l.length!==0)try{yield B(l)}catch(c){console.error("Failed to export PDF:",c)}}),L=()=>{let c=0;for(const s of n)if(s.type==="matching"){const d=r[s.id];Array.isArray(d)&&Array.isArray(s.matchingAnswerIndexList)&&d.length===s.matchingAnswerIndexList.length&&d.every((t,h)=>t===s.matchingAnswerIndexList[h])&&(c+=1)}return{correct:c,total:n.length,percentage:Math.round(c/n.length*100)}},k=()=>{const c=j*b,s=c+b;return n.slice(c,s)},f=()=>k().filter(s=>{if(s.type==="matching"){const d=r[s.id];if(!Array.isArray(d))return!1;const y=s.matchingLeft?s.matchingLeft.length:0;return d.length===y&&d.every(t=>typeof t=="number")}return!1}).length,N=()=>{const c=k();return c.length>0&&c.every(s=>{if(s.type==="matching"){const d=r[s.id],y=s.matchingLeft?s.matchingLeft.length:0;return Array.isArray(d)&&d.length===y&&d.every(t=>typeof t=="number")}return!1})},A=n.length>0&&n.every(c=>{if(c.type==="matching"){const s=r[c.id],d=c.matchingLeft?c.matchingLeft.length:0;return Array.isArray(s)&&s.length===d&&s.every(y=>typeof y=="number")}return!1}),z=()=>j<E()-1,x=()=>j>0;return e.jsx("div",{className:"matching-quiz-display",children:e.jsxs("div",{className:"quiz-results-container",children:[e.jsxs("div",{className:"quiz-results",children:[e.jsxs("div",{className:"results-header",children:[e.jsx("div",{className:"quiz-title-section",children:e.jsx("div",{className:`step-indicator ${i==="review"?"review-mode":""}`,children:i==="review"?e.jsxs(e.Fragment,{children:["All Questions Review",e.jsxs("span",{className:"step-progress",children:["(",n.filter(c=>{if(c.type==="matching"){const s=r[c.id],d=c.matchingLeft?c.matchingLeft.length:0;return Array.isArray(s)&&s.length===d&&s.every(y=>typeof y=="number")}return!1}).length,"/",n.length," answered)"]})]}):e.jsxs(e.Fragment,{children:["Step ",j+1," of ",E(),e.jsxs("span",{className:"step-progress",children:["(",f(),"/",k().length," answered)"]})]})})}),e.jsxs("div",{className:"header-actions",children:[i==="practice"&&A&&e.jsx("button",{className:"review-button",onClick:()=>p("review"),children:"Review All Answers"}),i==="review"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"review-button",onClick:()=>p("practice"),children:"Back to Practice"}),e.jsxs("div",{className:"score-display",children:["Score: ",L().correct,"/",L().total," (",L().percentage,"%)"]})]}),i==="practice"&&Object.keys(r).length>0&&e.jsxs("button",{className:"reset-all-button",onClick:g,title:"Reset all answers",children:[e.jsx(M,{size:16}),"Reset Answers"]}),e.jsx("button",{className:"generate-more-button",onClick:a,disabled:v,children:v?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"spinner"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5z"}),e.jsx("path",{d:"M2 17l10 5 10-5"}),e.jsx("path",{d:"M2 12l10 5 10-5"})]}),"Generate More"]})}),e.jsx("button",{className:"reset-button",onClick:m,children:"Create New Quiz"})]})]}),i==="practice"&&e.jsxs("div",{className:"step-navigation",children:[e.jsx("button",{className:"nav-button prev",onClick:()=>o(c=>c-1),disabled:!x(),children:"â† Previous"}),e.jsx("div",{className:"step-dots",children:Array.from({length:E()},(c,s)=>e.jsx("button",{className:`step-dot ${s===j?"active":""} ${(()=>{const d=l.slice(s*b,(s+1)*b);return d.length===0?"":d.every(t=>{if(t.type==="matching"){const h=r[t.id],$=t.matchingLeft?t.matchingLeft.length:0;return Array.isArray(h)&&h.length===$&&h.every(D=>typeof D=="number")}return!1})?"completed":""})()}`,onClick:()=>o(s),children:s+1},s))}),e.jsx("button",{className:"nav-button next",onClick:()=>o(c=>c+1),disabled:!z(),children:"Next â†’"})]}),e.jsx("div",{className:"quiz-questions",children:(i==="practice"?k():n).map((c,s)=>e.jsxs("div",{className:"quiz-question-card",children:[e.jsxs("div",{className:"question-header",children:[e.jsx("span",{className:"question-number",children:c.id}),e.jsx("h3",{children:c.question})]}),c.type==="matching"?(()=>{const d=(c.matchingLeft||[]).length,y=r[c.id]||Array(d).fill(void 0);return e.jsx(ue,{question:c,quizMode:i,currentMatches:y,setMatches:t=>u(h=>Q(T({},h),{[c.id]:t})),questionNumber:j*b+s+1,totalQuestions:n.length,score:L().percentage})})():null]},c.id))}),i==="practice"&&N()&&z()&&e.jsxs("div",{className:"step-completion",children:[e.jsxs("div",{className:"completion-message",children:[e.jsx("span",{className:"completion-icon",children:"ðŸŽ‰"}),"Great job! You've completed this set of questions."]}),e.jsx("button",{className:"next-step-button",onClick:()=>o(c=>c+1),children:"Continue to Next Set â†’"})]}),i==="practice"&&E()>1&&e.jsxs("div",{className:"step-navigation bottom-pagination",children:[e.jsx("button",{className:"nav-button prev",onClick:()=>o(c=>c-1),disabled:!x(),children:"â† Previous"}),e.jsx("div",{className:"step-dots",children:Array.from({length:E()},(c,s)=>e.jsx("button",{className:`step-dot ${s===j?"active":""} ${(()=>{const d=n.slice(s*b,(s+1)*b);return d.length===0?"":d.every(t=>{if(t.type==="matching"){const h=r[t.id],$=t.matchingLeft?t.matchingLeft.length:0;return Array.isArray(h)&&h.length===$&&h.every(D=>typeof D=="number")}return!1})?"completed":""})()}`,onClick:()=>o(s),children:s+1},s))}),e.jsx("button",{className:"nav-button next",onClick:()=>o(c=>c+1),disabled:!z(),children:"Next â†’"})]}),e.jsxs("div",{className:"actions",children:[e.jsxs("button",{className:"btn btn-secondary",onClick:w,title:"Export quiz with correct answers",children:[e.jsx(O,{size:18}),"Export Quiz"]}),e.jsx("button",{className:"generate-more-button",onClick:a,disabled:v,children:v?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"spinner"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5z"}),e.jsx("path",{d:"M2 17l10 5 10-5"}),e.jsx("path",{d:"M2 12l10 5 10-5"})]}),"Generate More"]})})]})]}),e.jsx(I,{questions:n,userAnswers:{},fibUserAnswers:{},orderingUserOrders:{},matchingUserMatches:r,isVisible:n.length>0})]})})},pe=({question:l,quizMode:m,userAnswer:a,onSelect:v})=>{const n=i=>a===void 0?"default":i===l.correctAnswer?"correct":i===a?"incorrect":"default",r=a!==void 0,u=a===l.correctAnswer;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"question-options",children:l.options.map((i,p)=>{const j=n(p),o=a===p;return e.jsxs("div",{className:`option ${j!=="default"?`option-${j}`:""} ${o?"selected":""} ${m==="practice"&&!r?"clickable":""} ${r?"disabled":""}`,onClick:()=>{m==="practice"&&!r&&v(p)},style:{cursor:m==="practice"&&!r?"pointer":"not-allowed",opacity:m==="practice"&&r&&!o&&j!=="correct"?.6:1},children:[e.jsxs("span",{className:"option-letter",children:[String.fromCharCode(65+p),"."]}),e.jsx("span",{className:"option-text",children:i}),r&&m==="practice"&&o&&e.jsx("span",{className:"lock-indicator",title:"Answer locked - use Reset to change",children:"ðŸ”’"}),r&&m==="review"&&e.jsxs(e.Fragment,{children:[j==="correct"&&e.jsx("span",{className:"feedback-icon correct",children:"âœ“"}),j==="incorrect"&&e.jsx("span",{className:"feedback-icon incorrect",children:"âœ—"})]}),r&&m==="practice"&&j==="correct"&&e.jsx("span",{className:"feedback-icon correct",children:"âœ“"}),r&&m==="practice"&&j==="incorrect"&&e.jsx("span",{className:"feedback-icon incorrect",children:"âœ—"})]},p)})}),m==="practice"&&r&&e.jsx("div",{className:"instant-feedback",children:u?e.jsxs("div",{className:"feedback correct-feedback",children:[e.jsx(V,{className:"feedback-icon",size:20}),"Correct! Well done."]}):e.jsxs("div",{className:"feedback incorrect-feedback",children:[e.jsx(W,{className:"feedback-icon",size:20}),"Incorrect. The correct answer is: ",e.jsx("strong",{children:l.options[l.correctAnswer]})]})})]})},Te=({generatedQuiz:l,onReset:m,onGenerateMore:a,isGenerating:v})=>{const n=l.filter(s=>s.type==="mcq"||s.type==="tf"),[r,u]=C.useState({}),[i,p]=C.useState("practice"),[j,o]=C.useState(0),[b]=C.useState(5),S=C.useRef(n.length);C.useEffect(()=>{if(n.length>S.current&&S.current>0){const s=Math.floor(S.current/b);s<f()&&o(s)}S.current=n.length},[n.length,b]);const E=(s,d)=>{i!=="review"&&r[s]===void 0&&u(y=>Q(T({},y),{[s]:d}))},g=()=>{if(i==="review")return;window.confirm("Are you sure you want to reset all your answers? This action cannot be undone.")&&(u({}),o(0))},w=()=>P(null,null,function*(){if(l.length!==0)try{yield B(l)}catch(s){console.error("Failed to export PDF:",s)}}),L=()=>{let s=0;for(const d of n)r[d.id]===d.correctAnswer&&(s+=1);return{correct:s,total:n.length,percentage:Math.round(s/n.length*100)}},k=()=>{const s=j*b,d=s+b;return n.slice(s,d)},f=()=>Math.ceil(n.length/b),N=()=>k().filter(d=>r[d.id]!==void 0).length,A=()=>{const s=k();return s.length>0&&s.every(d=>r[d.id]!==void 0)},z=n.length>0&&n.every(s=>r[s.id]!==void 0),x=()=>j<f()-1,c=()=>j>0;return e.jsx("div",{className:"mcq-quiz-display",children:e.jsxs("div",{className:"quiz-results-container",children:[e.jsxs("div",{className:"quiz-results",children:[e.jsxs("div",{className:"results-header",children:[e.jsx("div",{className:"quiz-title-section",children:e.jsx("div",{className:`step-indicator ${i==="review"?"review-mode":""}`,children:i==="review"?e.jsxs(e.Fragment,{children:["All Questions Review",e.jsxs("span",{className:"step-progress",children:["(",n.filter(s=>r[s.id]!==void 0).length,"/",n.length," answered)"]})]}):e.jsxs(e.Fragment,{children:["Step ",j+1," of ",f(),e.jsxs("span",{className:"step-progress",children:["(",N(),"/",k().length," answered)"]})]})})}),e.jsxs("div",{className:"header-actions",children:[i==="practice"&&z&&e.jsx("button",{className:"review-button",onClick:()=>p("review"),children:"Review All Answers"}),i==="review"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"review-button",onClick:()=>p("practice"),children:"Back to Practice"}),e.jsxs("div",{className:"score-display",children:["Score: ",L().correct,"/",L().total," (",L().percentage,"%)"]})]}),i==="practice"&&Object.keys(r).length>0&&e.jsxs("button",{className:"reset-all-button",onClick:g,title:"Reset all answers",children:[e.jsx(M,{size:16}),"Reset Answers"]}),e.jsx("button",{className:"generate-more-button",onClick:a,disabled:v,children:v?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"spinner"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5z"}),e.jsx("path",{d:"M2 17l10 5 10-5"}),e.jsx("path",{d:"M2 12l10 5 10-5"})]}),"Generate More"]})}),e.jsx("button",{className:"reset-button",onClick:m,children:"Create New Quiz"})]})]}),i==="practice"&&e.jsxs("div",{className:"step-navigation",children:[e.jsx("button",{className:"nav-button prev",onClick:()=>o(s=>s-1),disabled:!c(),children:"â† Previous"}),e.jsx("div",{className:"step-dots",children:Array.from({length:f()},(s,d)=>e.jsx("button",{className:`step-dot ${d===j?"active":""} ${(()=>{const y=l.slice(d*b,(d+1)*b);return y.length===0?"":y.every(h=>r[h.id]!==void 0)?"completed":""})()}`,onClick:()=>o(d),children:d+1},d))}),e.jsx("button",{className:"nav-button next",onClick:()=>o(s=>s+1),disabled:!x(),children:"Next â†’"})]}),e.jsx("div",{className:"quiz-questions",children:(i==="practice"?k():n).map(s=>e.jsxs("div",{className:"quiz-question-card",children:[e.jsxs("div",{className:"question-header",children:[e.jsx("span",{className:"question-number",children:s.id}),e.jsx("h3",{children:s.question})]}),e.jsx(pe,{question:s,quizMode:i,userAnswer:r[s.id],onSelect:d=>E(s.id,d)})]},s.id))}),i==="practice"&&A()&&x()&&e.jsxs("div",{className:"step-completion",children:[e.jsxs("div",{className:"completion-message",children:[e.jsx("span",{className:"completion-icon",children:"ðŸŽ‰"}),"Great job! You've completed this set of questions."]}),e.jsx("button",{className:"next-step-button",onClick:()=>o(s=>s+1),children:"Continue to Next Set â†’"})]}),i==="practice"&&f()>1&&e.jsxs("div",{className:"step-navigation bottom-pagination",children:[e.jsx("button",{className:"nav-button prev",onClick:()=>o(s=>s-1),disabled:!c(),children:"â† Previous"}),e.jsx("div",{className:"step-dots",children:Array.from({length:f()},(s,d)=>e.jsx("button",{className:`step-dot ${d===j?"active":""} ${(()=>{const y=n.slice(d*b,(d+1)*b);return y.length===0?"":y.every(h=>r[h.id]!==void 0)?"completed":""})()}`,onClick:()=>o(d),children:d+1},d))}),e.jsx("button",{className:"nav-button next",onClick:()=>o(s=>s+1),disabled:!x(),children:"Next â†’"})]}),e.jsxs("div",{className:"actions bottom-actions",children:[e.jsxs("button",{className:"btn btn-secondary",onClick:w,title:"Export quiz with correct answers",children:[e.jsx(O,{size:18}),"Export Quiz"]}),e.jsx("button",{className:"generate-more-button",onClick:a,disabled:v,children:v?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"spinner"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5z"}),e.jsx("path",{d:"M2 17l10 5 10-5"}),e.jsx("path",{d:"M2 12l10 5 10-5"})]}),"Generate More"]})})]})]}),e.jsx(I,{questions:n,userAnswers:r,fibUserAnswers:{},orderingUserOrders:{},matchingUserMatches:{},isVisible:n.length>0})]})})},ge=({question:l,quizMode:m,value:a,checked:v,onChange:n,onCheck:r})=>{const u=(l.answersList||[]).map(o=>o.trim().toLowerCase()),i=(a||"").trim().toLowerCase(),p=v&&u.includes(i),j=o=>{o.key==="Enter"&&m!=="review"&&!v&&(a||"").trim()&&r()};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"question-options",children:[e.jsx("input",{type:"text",placeholder:"Type your answer",value:a||"",onChange:o=>m!=="review"&&!v?n(o.target.value):void 0,onKeyDown:j,disabled:m==="review"||!!v}),e.jsx("button",{className:"fib-submit-button",onClick:()=>m!=="review"&&!v&&(a||"").trim()?r():void 0,disabled:m==="review"||!(a||"").trim()||!!v,title:v?"Submitted":"Submit answer",children:v?"Submitted":"Submit"})]}),!!v&&m==="practice"&&e.jsx("div",{className:"instant-feedback",children:p?e.jsx("div",{className:"feedback correct-feedback",children:e.jsxs("div",{className:"feedback-content",children:[e.jsx("span",{className:"feedback-icon",children:"âœ“"}),e.jsx("span",{children:"Correct! Well done."})]})}):e.jsxs("div",{className:"feedback incorrect-feedback",children:[e.jsxs("div",{className:"feedback-content",children:[e.jsx("span",{className:"feedback-icon",children:"âœ—"}),e.jsx("span",{children:"Incorrect."})]}),e.jsxs("strong",{children:["Correct answer: ",(l.answersList||[])[0]||""]})]})})]})},Pe=({generatedQuiz:l,onReset:m,onGenerateMore:a,isGenerating:v})=>{const n=l.filter(t=>t.type==="fib"),r=()=>Math.ceil(n.length/g),[u,i]=C.useState({}),[p,j]=C.useState({}),[o,b]=C.useState("practice"),[S,E]=C.useState(0),[g]=C.useState(5),w=C.useRef(n.length);C.useEffect(()=>{if(n.length>w.current&&w.current>0){const t=Math.floor(w.current/g);t<r()&&E(t)}w.current=n.length},[n.length,g,r]);const L=(t,h)=>{o!=="review"&&i($=>Q(T({},$),{[t]:h}))},k=t=>{o==="review"||!(u[t]||"").trim()||j($=>Q(T({},$),{[t]:!0}))},f=()=>{if(o==="review")return;window.confirm("Are you sure you want to reset all your answers? This action cannot be undone.")&&(i({}),j({}),E(0))},N=()=>P(null,null,function*(){if(l.length!==0)try{yield B(l)}catch(t){console.error("Failed to export PDF:",t)}}),A=()=>{let t=0;for(const h of n)if(h.type==="fib"){const $=u[h.id];if($&&Array.isArray(h.answersList)){const D=$.trim().toLowerCase();h.answersList.map(F=>F.trim().toLowerCase()).includes(D)&&(t+=1)}}return{correct:t,total:n.length,percentage:Math.round(t/n.length*100)}},z=()=>{const t=S*g,h=t+g;return n.slice(t,h)},x=()=>z().filter(h=>h.type==="fib"?u[h.id]!==void 0&&u[h.id].trim()!=="":!1).length,c=()=>{const t=z();return t.length>0&&t.every(h=>h.type==="fib"?u[h.id]!==void 0&&u[h.id].trim()!=="":!1)},s=n.length>0&&n.every(t=>t.type==="fib"?u[t.id]!==void 0&&u[t.id].trim()!=="":!1),d=()=>S<r()-1,y=()=>S>0;return e.jsx("div",{className:"fib-quiz-display",children:e.jsxs("div",{className:"quiz-results-container",children:[e.jsxs("div",{className:"quiz-results",children:[e.jsxs("div",{className:"results-header",children:[e.jsx("div",{className:"quiz-title-section",children:e.jsx("div",{className:`step-indicator ${o==="review"?"review-mode":""}`,children:o==="review"?e.jsxs(e.Fragment,{children:["All Questions Review",e.jsxs("span",{className:"step-progress",children:["(",n.filter(t=>t.type==="fib"?(u[t.id]||"").trim()!=="":!1).length,"/",n.length," answered)"]})]}):e.jsxs(e.Fragment,{children:["Step ",S+1," of ",r(),e.jsxs("span",{className:"step-progress",children:["(",x(),"/",z().length," answered)"]})]})})}),e.jsxs("div",{className:"header-actions",children:[o==="practice"&&s&&e.jsx("button",{className:"review-button",onClick:()=>b("review"),children:"Review All Answers"}),o==="review"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"review-button",onClick:()=>b("practice"),children:"Back to Practice"}),e.jsxs("div",{className:"score-display",children:["Score: ",A().correct,"/",A().total," (",A().percentage,"%)"]})]}),o==="practice"&&(Object.keys(u).length>0||Object.keys(p).length>0)&&e.jsxs("button",{className:"reset-all-button",onClick:f,title:"Reset all answers",children:[e.jsx(M,{size:16}),"Reset Answers"]}),e.jsx("button",{className:"generate-more-button",onClick:a,disabled:v,children:v?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"spinner"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5z"}),e.jsx("path",{d:"M2 17l10 5 10-5"}),e.jsx("path",{d:"M2 12l10 5 10-5"})]}),"Generate More"]})}),e.jsx("button",{className:"reset-button",onClick:m,children:"Create New Quiz"})]})]}),o==="practice"&&e.jsxs("div",{className:"step-navigation",children:[e.jsx("button",{className:"nav-button prev",onClick:()=>E(t=>t-1),disabled:!y(),children:"â† Previous"}),e.jsx("div",{className:"step-dots",children:Array.from({length:r()},(t,h)=>e.jsx("button",{className:`step-dot ${h===S?"active":""} ${(()=>{const $=l.slice(h*g,(h+1)*g);return $.length===0?"":$.every(F=>F.type==="fib"?(u[F.id]||"").trim()!=="":!1)?"completed":""})()}`,onClick:()=>E(h),children:h+1},h))}),e.jsx("button",{className:"nav-button next",onClick:()=>E(t=>t+1),disabled:!d(),children:"Next â†’"})]}),e.jsx("div",{className:"quiz-questions",children:(o==="practice"?z():n).map((t,h)=>e.jsxs("div",{className:"quiz-question-card",children:[e.jsxs("div",{className:"question-header",children:[e.jsx("span",{className:"question-number",children:t.id}),e.jsxs("div",{children:[e.jsx("h3",{children:t.question}),e.jsxs("div",{className:"question-progress",children:["Question ",o==="practice"?S*g+h+1:h+1," of ",n.length]})]})]}),t.type==="fib"?e.jsx(ge,{question:t,quizMode:o,value:u[t.id]||"",checked:!!p[t.id],onChange:$=>L(t.id,$),onCheck:()=>k(t.id)}):null]},t.id))}),o==="practice"&&c()&&d()&&e.jsxs("div",{className:"step-completion",children:[e.jsxs("div",{className:"completion-message",children:[e.jsx("span",{className:"completion-icon",children:"ðŸŽ‰"}),"Great job! You've completed this set of questions."]}),e.jsx("button",{className:"next-step-button",onClick:()=>E(t=>t+1),children:"Continue to Next Set â†’"})]}),o==="practice"&&r()>1&&e.jsxs("div",{className:"step-navigation bottom-pagination",children:[e.jsx("button",{className:"nav-button prev",onClick:()=>E(t=>t-1),disabled:!y(),children:"â† Previous"}),e.jsx("div",{className:"step-dots",children:Array.from({length:r()},(t,h)=>e.jsx("button",{className:`step-dot ${h===S?"active":""} ${(()=>{const $=n.slice(h*g,(h+1)*g);return $.length===0?"":$.every(F=>F.type==="fib"?(u[F.id]||"").trim()!=="":!1)?"completed":""})()}`,onClick:()=>E(h),children:h+1},h))}),e.jsx("button",{className:"nav-button next",onClick:()=>E(t=>t+1),disabled:!d(),children:"Next â†’"})]}),e.jsxs("div",{className:"actions",children:[e.jsxs("button",{className:"btn btn-secondary",onClick:N,title:"Export quiz with correct answers",children:[e.jsx(O,{size:18}),"Export Quiz"]}),e.jsx("button",{className:"generate-more-button",onClick:a,disabled:v,children:v?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"spinner"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5z"}),e.jsx("path",{d:"M2 17l10 5 10-5"}),e.jsx("path",{d:"M2 12l10 5 10-5"})]}),"Generate More"]})})]})]}),e.jsx(I,{questions:n,userAnswers:{},fibUserAnswers:u,orderingUserOrders:{},matchingUserMatches:{},isVisible:n.length>0})]})})},xe=({question:l,quizMode:m,currentOrder:a,setOrder:v})=>{const n=C.useRef(null),[r,u]=C.useState(null),[i,p]=C.useState(!1),j=l.orderingContents||[],o=(f,N)=>{if(m!=="practice")return;n.current=N,f.dataTransfer.effectAllowed="move";const A=f.target;A.style.opacity="0.5"},b=f=>{const N=f.target;N.style.opacity="1",u(null),n.current=null},S=(f,N)=>{f.preventDefault(),f.dataTransfer.dropEffect="move",u(N)},E=()=>{u(null)},g=(f,N)=>{if(f.preventDefault(),m!=="practice")return;const A=n.current;if(A===null||A===N)return;const z=a.slice(),[x]=z.splice(A,1);z.splice(N,0,x),v(z),u(null),n.current=null},w=()=>{const f=l.orderingAnswerIndexList||[];return a.length===f.length&&a.every((N,A)=>N===f[A])},L=()=>(l.orderingAnswerIndexList||[]).map(N=>j[N]),k=w()&&m==="practice";return e.jsxs(e.Fragment,{children:[m==="practice"&&!k&&e.jsxs("div",{className:"ordering-instructions",children:[e.jsxs("div",{className:"instruction-text",children:[e.jsx(Y,{size:16,className:"drag-icon"}),"Drag and drop the items to arrange them in the correct order"]}),e.jsxs("button",{className:"hint-button",onClick:()=>p(!i),title:"Show/hide correct order",children:[e.jsx(le,{size:16}),i?"Hide":"Show"," Answer"]})]}),k?e.jsxs("div",{className:"ordering-locked",children:[e.jsxs("div",{className:"locked-header",children:[e.jsx("span",{className:"lock-icon",children:"ðŸ”’"}),e.jsx("span",{className:"locked-text",children:"Correct Order Achieved!"})]}),e.jsx("div",{className:"correct-order-display",children:L().map((f,N)=>e.jsxs("div",{className:"correct-order-item",children:[e.jsxs("span",{className:"correct-index",children:[N+1,"."]}),e.jsx("span",{className:"correct-text",children:f}),e.jsx("span",{className:"check-mark",children:"âœ“"})]},N))})]}):e.jsx("div",{className:"question-options",children:a.map((f,N)=>e.jsxs("div",{className:`ordering-item ${m==="practice"?"draggable":""} ${r===N?"drag-over":""}`,draggable:m==="practice",onDragStart:A=>o(A,N),onDragEnd:b,onDragOver:A=>S(A,N),onDragLeave:E,onDrop:A=>g(A,N),children:[m==="practice"&&e.jsx("div",{className:"drag-handle",children:e.jsx(Y,{size:16})}),e.jsxs("span",{className:"ordering-index",children:[N+1,"."]}),e.jsx("span",{className:"ordering-text",children:j[f]})]},N))}),i&&!k&&e.jsxs("div",{className:"correct-order-hint",children:[e.jsx("h4",{children:"Correct Order:"}),e.jsx("ol",{className:"correct-order-list",children:L().map((f,N)=>e.jsx("li",{children:f},N))})]})]})},Qe=({generatedQuiz:l,onReset:m,onGenerateMore:a,isGenerating:v})=>{const n=l.filter(x=>x.type==="ordering"),[r,u]=C.useState({}),[i,p]=C.useState("practice"),[j,o]=C.useState(0),[b]=C.useState(5);C.useEffect(()=>{const x={};n.forEach(c=>{if(c.type==="ordering"){const s=c.orderingContents||[];x[c.id]=s.map((d,y)=>y)}}),u(x)},[n]);const S=()=>{if(i==="review")return;if(window.confirm("Are you sure you want to reset all your answers? This action cannot be undone.")){const c={};n.forEach(s=>{if(s.type==="ordering"){const d=s.orderingContents||[];c[s.id]=d.map((y,t)=>t)}}),u(c),o(0)}},E=()=>P(null,null,function*(){if(l.length!==0)try{yield B(l)}catch(x){console.error("Failed to export PDF:",x)}}),g=()=>{let x=0;for(const c of n)if(c.type==="ordering"){const s=r[c.id];Array.isArray(s)&&Array.isArray(c.orderingAnswerIndexList)&&s.length===c.orderingAnswerIndexList.length&&s.every((y,t)=>y===c.orderingAnswerIndexList[t])&&(x+=1)}return{correct:x,total:n.length,percentage:Math.round(x/n.length*100)}},w=()=>{const x=j*b,c=x+b;return n.slice(x,c)},L=()=>Math.ceil(n.length/b),k=()=>w().filter(c=>{if(c.type==="ordering"){const s=r[c.id],d=c.orderingAnswerIndexList||[];return Array.isArray(s)&&s.length===d.length&&s.every((y,t)=>y===d[t])}return!1}).length,f=()=>{const x=w();return x.length>0&&x.every(c=>{if(c.type==="ordering"){const s=r[c.id],d=c.orderingAnswerIndexList||[];return Array.isArray(s)&&s.length===d.length&&s.every((y,t)=>y===d[t])}return!1})},N=n.length>0&&n.every(x=>{if(x.type==="ordering"){const c=r[x.id],s=x.orderingAnswerIndexList||[];return Array.isArray(c)&&c.length===s.length&&c.every((d,y)=>d===s[y])}return!1}),A=()=>j<L()-1,z=()=>j>0;return e.jsx("div",{className:"ordering-quiz-display",children:e.jsxs("div",{className:"quiz-results-container",children:[e.jsxs("div",{className:"quiz-results",children:[e.jsxs("div",{className:"results-header",children:[e.jsx("div",{className:"quiz-title-section",children:e.jsx("div",{className:`step-indicator ${i==="review"?"review-mode":""}`,children:i==="review"?e.jsxs(e.Fragment,{children:["All Questions Review",e.jsxs("span",{className:"step-progress",children:["(",n.filter(x=>{if(x.type==="ordering"){const c=r[x.id],s=x.orderingAnswerIndexList||[];return Array.isArray(c)&&c.length===s.length&&c.every((d,y)=>d===s[y])}return!1}).length,"/",n.length," answered)"]})]}):e.jsxs(e.Fragment,{children:["Step ",j+1," of ",L(),e.jsxs("span",{className:"step-progress",children:["(",k(),"/",w().length," answered)"]})]})})}),e.jsxs("div",{className:"header-actions",children:[i==="practice"&&N&&e.jsx("button",{className:"review-button",onClick:()=>p("review"),children:"Review All Answers"}),i==="review"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"review-button",onClick:()=>p("practice"),children:"Back to Practice"}),e.jsxs("div",{className:"score-display",children:["Score: ",g().correct,"/",g().total," (",g().percentage,"%)"]})]}),i==="practice"&&Object.keys(r).length>0&&e.jsxs("button",{className:"reset-all-button",onClick:S,title:"Reset all answers",children:[e.jsx(M,{size:16}),"Reset Answers"]}),e.jsx("button",{className:"generate-more-button",onClick:a,disabled:v,children:v?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"spinner"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5z"}),e.jsx("path",{d:"M2 17l10 5 10-5"}),e.jsx("path",{d:"M2 12l10 5 10-5"})]}),"Generate More"]})}),e.jsx("button",{className:"reset-button",onClick:m,children:"Create New Quiz"})]})]}),i==="practice"&&e.jsxs("div",{className:"step-navigation",children:[e.jsx("button",{className:"nav-button prev",onClick:()=>o(x=>x-1),disabled:!z(),children:"â† Previous"}),e.jsx("div",{className:"step-dots",children:Array.from({length:L()},(x,c)=>e.jsx("button",{className:`step-dot ${c===j?"active":""} ${(()=>{const s=l.slice(c*b,(c+1)*b);return s.length===0?"":s.every(y=>{if(y.type==="ordering"){const t=r[y.id],h=y.orderingAnswerIndexList||[];return Array.isArray(t)&&t.length===h.length&&t.every(($,D)=>$===h[D])}return!1})?"completed":""})()}`,onClick:()=>o(c),children:c+1},c))}),e.jsx("button",{className:"nav-button next",onClick:()=>o(x=>x+1),disabled:!A(),children:"Next â†’"})]}),e.jsx("div",{className:"quiz-questions",children:(i==="practice"?w():n).map(x=>e.jsxs("div",{className:"quiz-question-card",children:[e.jsxs("div",{className:"question-header",children:[e.jsx("span",{className:"question-number",children:x.id}),e.jsx("h3",{children:x.question})]}),x.type==="ordering"?(()=>{const s=(x.orderingContents||[]).map((y,t)=>t),d=r[x.id]||s;return e.jsx(xe,{question:x,quizMode:i,currentOrder:d,setOrder:y=>u(t=>Q(T({},t),{[x.id]:y}))})})():null]},x.id))}),i==="practice"&&f()&&A()&&e.jsxs("div",{className:"step-completion",children:[e.jsxs("div",{className:"completion-message",children:[e.jsx("span",{className:"completion-icon",children:"ðŸŽ‰"}),"Great job! You've completed this set of questions."]}),e.jsx("button",{className:"next-step-button",onClick:()=>o(x=>x+1),children:"Continue to Next Set â†’"})]}),e.jsxs("div",{className:"actions",children:[e.jsxs("button",{className:"btn btn-secondary",onClick:E,title:"Export quiz with correct answers",children:[e.jsx(O,{size:18}),"Export Quiz"]}),e.jsx("button",{className:"generate-more-button",onClick:a,disabled:v,children:v?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"spinner"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5z"}),e.jsx("path",{d:"M2 17l10 5 10-5"}),e.jsx("path",{d:"M2 12l10 5 10-5"})]}),"Generate More"]})})]})]}),e.jsx(I,{questions:n,userAnswers:{},fibUserAnswers:{},orderingUserOrders:r,matchingUserMatches:{},isVisible:n.length>0})]})})};export{_e as C,Pe as F,Fe as L,Re as M,Qe as O,_,De as a,Te as b,Ee as c,$e as d,be as e,ye as f,we as g,Ce as h,Ae as i,ke as j,Se as k,Le as l,ze as m,Ne as p};
